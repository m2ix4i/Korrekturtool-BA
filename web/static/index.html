<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Meta tags for progressive enhancement -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="KI-gestützte Korrektur deutscher Bachelorarbeiten mit modernster Technologie">
    <meta name="keywords" content="Bachelorarbeit, Korrektur, KI, Deutsch, Wissenschaft, Thesis">
    <meta name="author" content="Korrekturtool Team">
    
    <!-- Theme and color scheme support -->
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#007aff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0a84ff" media="(prefers-color-scheme: dark)">
    
    <!-- Page title -->
    <title>Korrekturtool für Wissenschaftliche Arbeiten</title>
    
    <!-- Favicon and app icons -->
    <link rel="icon" href="/static/assets/favicon.ico" type="image/x-icon">
    
    <!-- CSS Modules - Modular architecture -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/themes.css">
    <link rel="stylesheet" href="/static/css/responsive.css">
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="/api/v1">
</head>
<body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>
    
    <!-- Theme toggle button -->
    <button type="button" class="theme-toggle" aria-label="Zwischen hellem und dunklem Theme wechseln" title="Theme wechseln">
        <span class="theme-toggle-icon" aria-hidden="true"></span>
    </button>
    
    <!-- Main application container -->
    <div class="app-container">
        <!-- Application header -->
        <header class="app-header" role="banner">
            <h1>🎓 Korrekturtool für Wissenschaftliche Arbeiten</h1>
            <p class="subtitle">KI-gestützte Korrektur deutscher Bachelorarbeiten</p>
        </header>
        
        <!-- Main content area -->
        <main class="app-main" id="main-content" role="main">
            
            <!-- File Upload Section -->
            <section class="upload-section" aria-labelledby="upload-heading">
                <h2 id="upload-heading" class="visually-hidden">Datei-Upload</h2>
                
                <div class="upload-area" 
                     id="uploadArea" 
                     role="button" 
                     tabindex="0"
                     aria-describedby="upload-instructions"
                     aria-label="DOCX-Datei zum Upload auswählen">
                    <div class="upload-icon" aria-hidden="true">📄</div>
                    <div class="upload-text">DOCX-Datei hier ablegen oder klicken zum Auswählen</div>
                    <div class="upload-subtext" id="upload-instructions">
                        Unterstützt werden Word-Dokumente bis 50 MB
                    </div>
                </div>
                
                <input type="file" 
                       id="fileInput" 
                       accept=".docx"
                       aria-describedby="upload-instructions"
                       aria-label="DOCX-Datei auswählen" />
            </section>
            
            <!-- Processing Configuration Section -->
            <section class="config-section section" 
                     id="configSection" 
                     aria-labelledby="config-heading"
                     role="region">
                <h2 id="config-heading">⚙️ Verarbeitungsoptionen</h2>
                
                <form id="processingForm" novalidate>
                    <div class="config-row">
                        <label for="processingMode" class="required">
                            Verarbeitungsmodus:
                            <span class="visually-hidden">(Erforderlich)</span>
                        </label>
                        <select id="processingMode" 
                                name="processing_mode"
                                required
                                aria-describedby="processing-mode-help">
                            <option value="complete">Vollständig (empfohlen)</option>
                            <option value="performance">Leistungsoptimiert</option>
                        </select>
                        <div id="processing-mode-help" class="visually-hidden">
                            Vollständig bietet umfassende Analyse, Leistungsoptimiert ist schneller
                        </div>
                    </div>
                    
                    <div class="config-row">
                        <label for="analysisCategories">
                            Analysekategorien:
                            <span class="visually-hidden">(Mehrfachauswahl möglich)</span>
                        </label>
                        <select id="analysisCategories" 
                                name="categories"
                                multiple 
                                size="4"
                                aria-describedby="categories-help">
                            <option value="grammar" selected>Grammatik</option>
                            <option value="style" selected>Stil</option>
                            <option value="clarity" selected>Klarheit</option>
                            <option value="academic" selected>Wissenschaftlichkeit</option>
                        </select>
                        <div id="categories-help" class="visually-hidden">
                            Halten Sie Strg gedrückt, um mehrere Kategorien auszuwählen
                        </div>
                    </div>
                    
                    <div class="config-row">
                        <label for="outputFilename">
                            Ausgabedatei (optional):
                        </label>
                        <input type="text" 
                               id="outputFilename" 
                               name="output_filename"
                               placeholder="dokument_korrigiert.docx"
                               aria-describedby="filename-help" />
                        <div id="filename-help" class="visually-hidden">
                            Wenn leer, wird automatisch ein Name generiert
                        </div>
                    </div>
                    
                    <div class="config-actions">
                        <button type="submit" 
                                class="btn btn-primary" 
                                id="startProcessing"
                                aria-describedby="start-help">
                            🚀 Korrektur starten
                        </button>
                        <button type="button" 
                                class="btn btn-secondary" 
                                id="cancelUpload">
                            ❌ Abbrechen
                        </button>
                        <div id="start-help" class="visually-hidden">
                            Startet die KI-basierte Korrektur Ihrer Bachelorarbeit
                        </div>
                    </div>
                </form>
            </section>
            
            <!-- Progress Section -->
            <section class="progress-section section" 
                     id="progressSection" 
                     aria-labelledby="progress-heading"
                     aria-live="polite"
                     role="region">
                <h2 id="progress-heading">📊 Verarbeitungsfortschritt</h2>
                
                <div class="progress-bar" 
                     role="progressbar" 
                     aria-valuenow="0" 
                     aria-valuemin="0" 
                     aria-valuemax="100"
                     aria-labelledby="progress-text">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="progress-text" id="progressText">Initialisierung...</div>
                
                <div class="progress-status">
                    <span class="status-badge processing" 
                          id="statusBadge" 
                          role="status"
                          aria-live="polite">
                        Verarbeitung
                    </span>
                </div>
            </section>
            
            <!-- Results Section -->
            <section class="results-section section" 
                     id="resultsSection" 
                     aria-labelledby="results-heading"
                     role="region">
                <h2 id="results-heading">✅ Ergebnisse</h2>
                
                <div id="resultsList" 
                     role="log" 
                     aria-live="polite" 
                     aria-label="Verarbeitungsergebnisse">
                    <!-- Results will be dynamically inserted here -->
                </div>
            </section>
            
        </main>
        
        <!-- Application footer -->
        <footer class="app-footer" role="contentinfo">
            <p class="text-center text-secondary mt-4">
                <small>
                    Powered by KI-Technologie | 
                    <a href="#" id="aboutLink">Über das Tool</a> | 
                    <a href="#" id="privacyLink">Datenschutz</a>
                </small>
            </p>
        </footer>
    </div>
    
    <!-- Error message container for global errors -->
    <div id="errorContainer" 
         role="alert" 
         aria-live="assertive" 
         class="error-message" 
         style="display: none;">
    </div>
    
    <!-- Success message container for global success messages -->
    <div id="successContainer" 
         role="status" 
         aria-live="polite" 
         class="success-message" 
         style="display: none;">
    </div>
    
    <!-- ARIA live regions for screen reader announcements -->
    <div id="ariaLivePolite" 
         aria-live="polite" 
         aria-atomic="true" 
         class="visually-hidden"></div>
    <div id="ariaLiveAssertive" 
         aria-live="assertive" 
         aria-atomic="true" 
         class="visually-hidden"></div>
    
    <!-- JavaScript Modules - Load at end for performance -->
    <script type="module" src="/static/js/app.js"></script>
    
    <!-- Fallback for browsers without module support -->
    <script nomodule>
        console.warn('Ihr Browser unterstützt keine ES6-Module. Bitte verwenden Sie einen moderneren Browser.');
        document.body.innerHTML = '<div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;"><h1>Browser nicht unterstützt</h1><p>Bitte verwenden Sie einen moderneren Browser wie Chrome, Firefox, Safari oder Edge.</p></div>';
    </script>
    
    <!-- Performance monitoring -->
    <script>
        // Basic performance monitoring
        window.addEventListener('load', function() {
            if ('performance' in window) {
                const perfData = performance.getEntriesByType('navigation')[0];
                if (perfData) {
                    console.log(`🎯 Seite geladen in ${Math.round(perfData.loadEventEnd - perfData.fetchStart)}ms`);
                }
            }
        });
        
        // Service worker registration (future enhancement)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // navigator.serviceWorker.register('/sw.js');
                console.log('🔧 Service Worker bereit für zukünftige Implementierung');
            });
        }
    </script>
</body>
</html>