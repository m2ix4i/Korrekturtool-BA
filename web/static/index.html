<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Meta tags for progressive enhancement -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="KI-gestützte Korrektur deutscher Bachelorarbeiten mit modernster Technologie">
    <meta name="keywords" content="Bachelorarbeit, Korrektur, KI, Deutsch, Wissenschaft, Thesis">
    <meta name="author" content="Korrekturtool Team">
    
    <!-- Theme and color scheme support -->
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#007aff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0a84ff" media="(prefers-color-scheme: dark)">
    
    <!-- Page title -->
    <title>Korrekturtool für Wissenschaftliche Arbeiten</title>
    
    <!-- Favicon and app icons -->
    <link rel="icon" href="/static/assets/favicon.ico" type="image/x-icon">
    
    <!-- CSS Modules - Modular architecture -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/themes.css">
    <link rel="stylesheet" href="/static/css/responsive.css">
    <link rel="stylesheet" href="/static/css/config.css">
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="/api/v1">
</head>
<body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>
    
    <!-- Theme toggle button -->
    <button type="button" class="theme-toggle" aria-label="Zwischen hellem und dunklem Theme wechseln" title="Theme wechseln">
        <span class="theme-toggle-icon" aria-hidden="true"></span>
    </button>
    
    <!-- Main application container -->
    <div class="app-container">
        <!-- Application header -->
        <header class="app-header" role="banner">
            <h1>🎓 Korrekturtool für Wissenschaftliche Arbeiten</h1>
            <p class="subtitle">KI-gestützte Korrektur deutscher Bachelorarbeiten</p>
        </header>
        
        <!-- Main content area -->
        <main class="app-main" id="main-content" role="main">
            
            <!-- File Upload Section -->
            <section class="upload-section" aria-labelledby="upload-heading">
                <h2 id="upload-heading" class="visually-hidden">Datei-Upload</h2>
                
                <div class="upload-area" 
                     id="uploadArea" 
                     role="button" 
                     tabindex="0"
                     aria-describedby="upload-instructions"
                     aria-label="DOCX-Datei zum Upload auswählen">
                    <div class="upload-icon" aria-hidden="true">📄</div>
                    <div class="upload-text">DOCX-Datei hier ablegen oder klicken zum Auswählen</div>
                    <div class="upload-subtext" id="upload-instructions">
                        Unterstützt werden Word-Dokumente bis 50 MB
                    </div>
                </div>
                
                <input type="file" 
                       id="fileInput" 
                       accept=".docx"
                       aria-describedby="upload-instructions"
                       aria-label="DOCX-Datei auswählen" />
            </section>
            
            <!-- Processing Configuration Section -->
            <section class="config-section section" 
                     id="configSection" 
                     aria-labelledby="config-heading"
                     role="region">
                <h2 id="config-heading">⚙️ Verarbeitungsoptionen</h2>
                
                <form id="processingForm" novalidate>
                    <!-- Processing Mode Selection (Radio Buttons) -->
                    <div class="config-group">
                        <fieldset class="config-fieldset">
                            <legend class="config-legend required">
                                Verarbeitungsmodus:
                                <span class="tooltip-trigger" data-tooltip="Wählen Sie den passenden Modus für Ihr Dokument">ℹ️</span>
                            </legend>
                            
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="modeComplete" name="processing_mode" value="complete" checked required>
                                    <label for="modeComplete" class="radio-label">
                                        <span class="radio-title">🎯 Vollständig (empfohlen)</span>
                                        <span class="radio-description">Umfassende Analyse aller Kategorien mit detaillierten Kommentaren</span>
                                    </label>
                                </div>
                                
                                <div class="radio-option">
                                    <input type="radio" id="modePerformance" name="processing_mode" value="performance">
                                    <label for="modePerformance" class="radio-label">
                                        <span class="radio-title">⚡ Leistungsoptimiert</span>
                                        <span class="radio-description">Schnellere Verarbeitung für große Dokumente mit fokussierten Kommentaren</span>
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                    <!-- Analysis Categories (Checkboxes) -->
                    <div class="config-group">
                        <fieldset class="config-fieldset">
                            <legend class="config-legend">
                                Analysekategorien:
                                <span class="tooltip-trigger" data-tooltip="Wählen Sie die gewünschten Analysebereiche">ℹ️</span>
                            </legend>
                            
                            <div class="checkbox-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="categoryGrammar" name="categories" value="grammar" checked>
                                    <label for="categoryGrammar" class="checkbox-label">
                                        <span class="checkbox-title">📝 Grammatik</span>
                                        <span class="checkbox-description">Rechtschreibung, Zeichensetzung und grammatische Korrektheit</span>
                                    </label>
                                </div>
                                
                                <div class="checkbox-option">
                                    <input type="checkbox" id="categoryStyle" name="categories" value="style" checked>
                                    <label for="categoryStyle" class="checkbox-label">
                                        <span class="checkbox-title">✨ Stil</span>
                                        <span class="checkbox-description">Sprachlicher Ausdruck, Wortwahl und Stilverbesserungen</span>
                                    </label>
                                </div>
                                
                                <div class="checkbox-option">
                                    <input type="checkbox" id="categoryClarity" name="categories" value="clarity" checked>
                                    <label for="categoryClarity" class="checkbox-label">
                                        <span class="checkbox-title">💡 Klarheit</span>
                                        <span class="checkbox-description">Verständlichkeit, Struktur und logischer Aufbau</span>
                                    </label>
                                </div>
                                
                                <div class="checkbox-option">
                                    <input type="checkbox" id="categoryAcademic" name="categories" value="academic" checked>
                                    <label for="categoryAcademic" class="checkbox-label">
                                        <span class="checkbox-title">🎓 Wissenschaftlichkeit</span>
                                        <span class="checkbox-description">Wissenschaftliche Standards, Argumentation und Fachsprache</span>
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                    <!-- Cost and Time Estimation Display -->
                    <div class="config-group">
                        <div class="estimation-panel">
                            <div class="estimation-item">
                                <span class="estimation-label">💰 Geschätzte Kosten:</span>
                                <span class="estimation-value" id="costEstimate">$0.25 - $0.75</span>
                            </div>
                            <div class="estimation-item">
                                <span class="estimation-label">⏱️ Geschätzte Dauer:</span>
                                <span class="estimation-value" id="timeEstimate">30 - 90 Sekunden</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Basic Output Options -->
                    <div class="config-group">
                        <div class="config-row">
                            <label for="outputFilename">
                                📄 Ausgabedatei (optional):
                                <span class="tooltip-trigger" data-tooltip="Lassen Sie das Feld leer für automatische Benennung">ℹ️</span>
                            </label>
                            <input type="text" 
                                   id="outputFilename" 
                                   name="output_filename"
                                   placeholder="dokument_korrigiert.docx"
                                   aria-describedby="filename-help" />
                            <div id="filename-help" class="visually-hidden">
                                Wenn leer, wird automatisch ein Name generiert
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Options (Collapsible) -->
                    <div class="config-group">
                        <button type="button" class="advanced-toggle" id="advancedToggle" aria-expanded="false">
                            🔧 Erweiterte Optionen
                            <span class="toggle-icon">▼</span>
                        </button>
                        
                        <div class="advanced-options" id="advancedOptions" aria-hidden="true">
                            <div class="config-row">
                                <label for="processingPriority">
                                    🚀 Verarbeitungspriorität:
                                    <span class="tooltip-trigger" data-tooltip="Höhere Priorität für schnellere Verarbeitung">ℹ️</span>
                                </label>
                                <select id="processingPriority" name="processing_priority">
                                    <option value="normal">Normal</option>
                                    <option value="high">Hoch</option>
                                </select>
                            </div>
                            
                            <div class="config-row">
                                <label for="commentDensity">
                                    💬 Kommentardichte:
                                    <span class="tooltip-trigger" data-tooltip="Bestimmt die Anzahl der Verbesserungsvorschläge">ℹ️</span>
                                </label>
                                <select id="commentDensity" name="comment_density">
                                    <option value="low">Niedrig (nur wichtige Verbesserungen)</option>
                                    <option value="medium" selected>Mittel (ausgewogen)</option>
                                    <option value="high">Hoch (detaillierte Analyse)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-actions">
                        <button type="submit" 
                                class="btn btn-primary" 
                                id="startProcessing"
                                aria-describedby="start-help">
                            🚀 Korrektur starten
                        </button>
                        <button type="button" 
                                class="btn btn-secondary" 
                                id="cancelUpload">
                            ❌ Abbrechen
                        </button>
                        <div id="start-help" class="visually-hidden">
                            Startet die KI-basierte Korrektur Ihrer Bachelorarbeit
                        </div>
                    </div>
                </form>
            </section>
            
            <!-- Progress Section -->
            <section class="progress-section section" 
                     id="progressSection" 
                     aria-labelledby="progress-heading"
                     aria-live="polite"
                     role="region">
                <h2 id="progress-heading">📊 Verarbeitungsfortschritt</h2>
                
                <div class="progress-bar" 
                     role="progressbar" 
                     aria-valuenow="0" 
                     aria-valuemin="0" 
                     aria-valuemax="100"
                     aria-labelledby="progress-text">
                    <div class="progress-fill" id="progressFill"></div>
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                </div>
                
                <div class="progress-text" id="progressText">Initialisierung...</div>
                
                <!-- Processing Phases -->
                <div class="progress-phases" id="progressPhases">
                    <span class="phase" id="phaseUpload" data-phase="parsing">
                        <span class="phase-icon">📄</span>
                        <span class="phase-label">Upload</span>
                    </span>
                    <span class="phase" id="phaseAnalysis" data-phase="analyzing">
                        <span class="phase-icon">🤖</span>
                        <span class="phase-label">KI-Analyse</span>
                    </span>
                    <span class="phase" id="phaseComments" data-phase="commenting">
                        <span class="phase-icon">💬</span>
                        <span class="phase-label">Kommentare</span>
                    </span>
                    <span class="phase" id="phaseIntegration" data-phase="integrating">
                        <span class="phase-icon">📝</span>
                        <span class="phase-label">Integration</span>
                    </span>
                </div>
                
                <!-- Progress Timing Information -->
                <div class="progress-timing" id="progressTiming">
                    <div class="timing-item">
                        <span class="timing-label">Geschätzte Zeit:</span>
                        <span class="timing-value" id="estimatedTime">--</span>
                    </div>
                    <div class="timing-item">
                        <span class="timing-label">Verstrichene Zeit:</span>
                        <span class="timing-value" id="elapsedTime">0s</span>
                    </div>
                </div>
                
                <div class="progress-status">
                    <span class="status-badge processing" 
                          id="statusBadge" 
                          role="status"
                          aria-live="polite">
                        Verarbeitung
                    </span>
                </div>
            </section>
            
            <!-- Results Section -->
            <section class="results-section section" 
                     id="resultsSection" 
                     aria-labelledby="results-heading"
                     role="region">
                <h2 id="results-heading">✅ Ergebnisse</h2>
                
                <div id="resultsList" 
                     role="log" 
                     aria-live="polite" 
                     aria-label="Verarbeitungsergebnisse">
                    <!-- Results will be dynamically inserted here -->
                </div>
            </section>
            
        </main>
        
        <!-- Application footer -->
        <footer class="app-footer" role="contentinfo">
            <p class="text-center text-secondary mt-4">
                <small>
                    Powered by KI-Technologie | 
                    <a href="#" id="aboutLink">Über das Tool</a> | 
                    <a href="#" id="privacyLink">Datenschutz</a>
                </small>
            </p>
        </footer>
    </div>
    
    <!-- Error message container for global errors -->
    <div id="errorContainer" 
         role="alert" 
         aria-live="assertive" 
         class="error-message" 
         style="display: none;">
    </div>
    
    <!-- Success message container for global success messages -->
    <div id="successContainer" 
         role="status" 
         aria-live="polite" 
         class="success-message" 
         style="display: none;">
    </div>
    
    <!-- ARIA live regions for screen reader announcements -->
    <div id="ariaLivePolite" 
         aria-live="polite" 
         aria-atomic="true" 
         class="visually-hidden"></div>
    <div id="ariaLiveAssertive" 
         aria-live="assertive" 
         aria-atomic="true" 
         class="visually-hidden"></div>
    
    <!-- Socket.IO Client Library - Required for WebSocket functionality -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" 
            integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO" 
            crossorigin="anonymous"></script>
    
    <!-- JavaScript Modules - Load at end for performance -->
    <script type="module" src="/static/js/app.js"></script>
    
    <!-- Fallback for browsers without module support -->
    <script nomodule>
        console.warn('Ihr Browser unterstützt keine ES6-Module. Bitte verwenden Sie einen moderneren Browser.');
        document.body.innerHTML = '<div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;"><h1>Browser nicht unterstützt</h1><p>Bitte verwenden Sie einen moderneren Browser wie Chrome, Firefox, Safari oder Edge.</p></div>';
    </script>
    
    <!-- Performance monitoring -->
    <script>
        // Basic performance monitoring
        window.addEventListener('load', function() {
            if ('performance' in window) {
                const perfData = performance.getEntriesByType('navigation')[0];
                if (perfData) {
                    console.log(`🎯 Seite geladen in ${Math.round(perfData.loadEventEnd - perfData.fetchStart)}ms`);
                }
            }
        });
        
        // Service worker registration (future enhancement)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // navigator.serviceWorker.register('/sw.js');
                console.log('🔧 Service Worker bereit für zukünftige Implementierung');
            });
        }
    </script>
</body>
</html>